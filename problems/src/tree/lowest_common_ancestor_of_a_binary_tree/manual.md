# Ð”ÐÐ•Ð’ÐÐ˜Ðš Ð Ð•Ð¨Ð•ÐÐ˜Ð™

> https://code.yandex-team.ru/ 

ÐšÐ¾Ð´ Ð´Ð»Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ + Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ 

- Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ
- Ð¾Ñ†ÐµÐ½ÐºÐ° Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¸ Ð¿Ð°Ð¼ÑÑ‚Ð¸
- Ð¿ÑƒÑ‚ÑŒ Ð¿Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼Ñƒ Ð²Ñ‹ Ð¿Ñ€Ð¸ÑˆÐ»Ð¸ Ðº Ñ€ÐµÑˆÐµÐ½Ð¸ÑŽ


## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°:

# 1. Ð ÐµÑˆÐµÐ½Ð¸Ðµ

```kotlin
/**
 * Definition for a binary tree node.
 * class TreeNode(var `val`: Int = 0) {
 *     var left: TreeNode? = null
 *     var right: TreeNode? = null
 * }
 */

class Solution {
    fun lowestCommonAncestor(root: TreeNode?, p: TreeNode?, q: TreeNode?): TreeNode? {
        return traverse(root, p, q)
    }

    fun traverse(root: TreeNode?, p: TreeNode?, q: TreeNode?): TreeNode?{
        if(root == null) return null
        if(root == p || root == q) return root

        // postorder
        val left = traverse(root.left, p, q)
        val right = traverse(root.right, p, q)

        return when {
            left != null && right != null -> root
            else -> left ?: right
        }
    }
}
```


# 2. ÐžÑ†ÐµÐ½ÐºÐ° Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸


# 3. ÐžÑ†ÐµÐ½ÐºÐ° Ð¿Ð¾ Ð¿Ð°Ð¼ÑÑ‚Ð¸


# 4. Ð’Ð°ÑˆÐ¸ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ñ


Ð Ð°Ð·Ð±ÐµÑ€ÐµÐ¼ Ð½Ð° **Ð´ÐµÑ‚Ð°Ð»ÑÑ… Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°Ñ…** ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÑÑ‚Ð¾Ñ‚ ÐºÐ¾Ð´! ðŸŒŸ

## ðŸ“Œ ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1: ÐŸÑ€Ð¾ÑÑ‚Ð¾Ðµ Ð´ÐµÑ€ÐµÐ²Ð¾
```
    A
   / \
  B   C
```
**Ð˜Ñ‰ÐµÐ¼ LCA Ð´Ð»Ñ B Ð¸ C**

### Ð¨Ð°Ð³Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:
1. **ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ñ A**:
    - A â‰  B, A â‰  C â†’ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼
    - Ð¡Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼ Ð»ÐµÐ²Ð¾Ð³Ð¾ Ñ€ÐµÐ±ÐµÐ½ÐºÐ° B

2. **ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ðº B**:
    - B == B âœ… â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ B Ðº A

3. **ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ðº C**:
    - C == C âœ… â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ C Ðº A

4. **ÐÐ½Ð°Ð»Ð¸Ð· Ð² A**:
    - left = B, right = C
    - ÐžÐ±Ð° Ð½Ðµ null â†’ A ÑÐ²Ð»ÑÐµÑ‚ÑÑ LCA!
    - **Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ A**

## ðŸ“Œ ÐŸÑ€Ð¸Ð¼ÐµÑ€ 2: Ð“Ð»ÑƒÐ±Ð¾ÐºÐ¾Ðµ Ð´ÐµÑ€ÐµÐ²Ð¾
```
    A
   / \
  B   C
 / \
D   E
```
**Ð˜Ñ‰ÐµÐ¼ LCA Ð´Ð»Ñ D Ð¸ E**

### Ð¨Ð°Ð³Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:
1. **A**: Ð½Ðµ D/E â†’ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼ B Ð¸ C
2. **B**: Ð½Ðµ D/E â†’ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼ D Ð¸ E
3. **D**: D == D âœ… â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ D Ðº B
4. **E**: E == E âœ… â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ E Ðº B
5. **B**: left = D, right = E â†’ Ð¾Ð±Ð° Ð½Ðµ null â†’ B ÑÐ²Ð»ÑÐµÑ‚ÑÑ LCA!
6. **A**: Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¾Ñ‚ B â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ B

## ðŸ“Œ ÐŸÑ€Ð¸Ð¼ÐµÑ€ 3: ÐžÐ´Ð¸Ð½ ÑƒÐ·ÐµÐ» - Ð¿Ñ€ÐµÐ´Ð¾Ðº Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾
```
    A
   / \
  B   C
 /
D
```
**Ð˜Ñ‰ÐµÐ¼ LCA Ð´Ð»Ñ B Ð¸ D**

### Ð¨Ð°Ð³Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:
1. **A**: Ð½Ðµ B/D â†’ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼ B Ð¸ C
2. **B**: B == B âœ… â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ B Ðº A (Ð½Ðµ Ð¸Ð´ÐµÐ¼ Ðº Ð´ÐµÑ‚ÑÐ¼!)
3. **C**: Ð½Ðµ B/D â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ null Ðº A
4. **A**: left = B, right = null â†’ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ B
5. **B ÑÐ²Ð»ÑÐµÑ‚ÑÑ LCA** (Ð¿Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸ÑŽ: ÑƒÐ·ÐµÐ» Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ Ð¿Ñ€ÐµÐ´ÐºÐ¾Ð¼)

## ðŸŽ¯ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð°:

### 1. **Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¸**:
```kotlin
if (root == null) return null          // Ð¢ÑƒÐ¿Ð¸Ðº
if (root == p || root == q) return root // ÐÐ°ÑˆÐ»Ð¸ Ñ†ÐµÐ»ÑŒ!
```

### 2. **Ð ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ñ‹Ð¹ Ð¾Ð¿Ñ€Ð¾Ñ**:
```kotlin
val left = traverse(root.left, p, q)   // Ð§Ñ‚Ð¾ Ð½Ð°ÑˆÐµÐ» Ð»ÐµÐ²Ñ‹Ð¹?
val right = traverse(root.right, p, q) // Ð§Ñ‚Ð¾ Ð½Ð°ÑˆÐµÐ» Ð¿Ñ€Ð°Ð²Ñ‹Ð¹?
```

### 3. **Ð›Ð¾Ð³Ð¸ÐºÐ° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ LCA**:
```kotlin
return when {
    // ÐžÐ‘Ð Ñ€ÐµÐ±ÐµÐ½ÐºÐ° Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ð°ÑˆÐ»Ð¸ â†’ Ñ LCA!
    left != null && right != null -> root
    
    // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð½Ð°Ð²ÐµÑ€Ñ… Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð½Ð°ÑˆÐ»Ð¸ (Ð¸Ð»Ð¸ null)
    else -> left ?: right
}
```
